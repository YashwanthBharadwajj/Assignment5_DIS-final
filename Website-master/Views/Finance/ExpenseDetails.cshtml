@model SmartSpender.Models.Expense

@{
    ViewData["Title"] = "Expense Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="container mt-3">
    <button type="button" class="btn btn-primary" id="toggleExpenseFormButton">Add New Expense</button>
    <div id="expenseFormContainer" style="display: none;">
        <form asp-action="SaveExpense" asp-controller="Finance" method="post" id="expenseForm">
            <div class="form-group">
                <label asp-for="Category">Category</label>
                <select asp-for="Category" class="form-control">
                    <option value="Groceries">Groceries</option>
                    <option value="Rent">Rent</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Transport">Transport</option>
                    <option value="Miscellaneous">Miscellaneous</option>
                </select>
            </div>
            <div class="form-group">
                <label asp-for="Item">Item</label>
                <input asp-for="Item" class="form-control" required />
            </div>
            <div class="form-group">
                <label asp-for="Amount">Amount ($)</label>
                <input asp-for="Amount" type="number" class="form-control" required />
            </div>
            <button type="submit" class="btn btn-primary">Save Expense</button>
        </form>
    </div>

    <div class="container mt-3 container-background-color">

        <!-- Existing div for expense list, if you have one -->
        <div id="expenseList"></div>

        <!-- Add the table for displaying expenses here -->
        <table id="expensesTable" class="table">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Item</th>
                    <th>Amount ($)</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be added here dynamically via JavaScript -->
            </tbody>
        </table>


        <div class="mt-3" id="expenseList"></div>

    </div>



    @section Scripts {
        <script>
            $(document).ready(function () {
                $('#toggleExpenseFormButton').click(function () {
                    // This toggles the visibility and updates the button text
                    var formContainer = $('#expenseFormContainer');
                    formContainer.toggle();
                    $(this).text(formContainer.is(':visible') ? 'Cancel' : 'Add New Expense');
                });
            });
        </script>
    }
</div>